# Key-codes-of-research
 Taking the Poyang Lake Eco-economic Zone (PLEEZ) as the illustration area, this project provides key technical codes of the Methodology in section 2.3 of the research "A novel flood risk analysis framework based on Earth Observation data to retrieve historical inundations and future scenarios" to provide a reproducible reference for potential users who are interested in our work.
##  Part A: Historical inundations extraction 
- Based on the Sentinel-1 SAR data provided by Google Earth Engine (GEE), this code (named as <strong>"Flood_extraction.txt"</strong>) is to extract the water bodies by two time-adjacent image changes. 
- The users can copy the code on the GEE for running, the shapefile of PLEEZ is contained in the file named as <strong>"Shapefile for the run of the GEE code.zip"</strong>.
- More inundations during the flood evolution process can be inferred by repeating the code with choosing images from different time periods.  
 
<span style="font-size: 6px;"><i>  Notes: The original version of the code was provided by the Office for Outer Space Affairs UN-SPIDER Knowledge Portal (https://www.un-spider.org/advisory-support/recommended-practices/recommended-practice-google-earth-engine-flood-mapping/step-by-step). The web site provides a step-by-step procedure tutorial for the generation of flood extent map using GEE. The original code provided by UN-SPIDER can be accessed and run through this link: https://code.earthengine.google.com/fcb6e6089508ef94398d1079948ab28a. </i></span>


##  Part B: Historical precipitation extraction  
- The first code (named as <strong>"Daily_Precipitation_extraction.txt"</strong>) extracts and downloads the daily historical rainfall rasters (.tif) for the target study area based on satellite-rainfall product CHIRPS on the GEE. The users can copy the code on the GEE for running, the shapefile of PLEEZ is contained in the file named as <strong>"Shapefile for the run of the first GEE code"</strong>. 
- After that, the another code edited with Python (named as <strong>"Calculation of RMAX3.py"</strong>) calculates the corresponding maximum 3-day rainfall (RMAX3) of the PLEEZ for the target year. We here provide the daily rainfall data in 2020 as example data (named as <strong>"CHIRPS_2020_1KM.zip"</strong>).
- Repeat these two codes yields other yearsâ€™ RMAX3.

##  Part C: The FAHP-Entropy weight calculation  
- The python code (named as <strong>"Caculation of FAHP weight.py"</strong>) gives an easy illustrative caclulation of FAHP weight. The input is judgment matrixes of indicators, and the output is weights of indicators.
- The excel file (named as <strong>"Caculation of FAHP-Entropy weight.xlsx"</strong>) provides detailed calculation procedures of Entroy weights in the first sheet named as "Entropy method". Column B to J are all raster values of each factors. The FAHP-Entropy weights are caculated in the second sheet named as "FAHP-Entropy method". We reserve the caculation equantion in the excel file for understanding.
 
##  Part D: Future precipitation extraction 
- The code (named as <strong>"Calculation of future RMAX3.py"</strong>) extracts the RMAX3 for a given year using the future precipitation data "NEX-GDDP".   
- We provide the sample results (.tif) of RMAX3 of 21 models and their average tif for 2020 under RCP4.5 generated by this code (named as <strong>"Results of RMAX3 in 2020 under RCP4.5.zip"</strong>).

 <span style="font-size: 6px;"><i>  Notes: Since a single file (.nc) of NEX-GDDPis large in storage, original sample data is not provided here. Please see the website for the download of the original data: https://www.nccs.nasa.gov/services/data-collections/land-based-products/nex-gddp.


 ### Note
 The techniques in other sections of this study can be implemented by means of spatial analysis, data statistics, etc. If you have any questions, please contact us by the email (kezhenyao@mail.bnu.edu.cn).
 ### Thank you for reading!
